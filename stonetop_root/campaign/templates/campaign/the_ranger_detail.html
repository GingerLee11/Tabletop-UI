{% extends 'base2.html' %}
{% load static %}

{% block title %}The Ranger: {{ character.character_name }} Home{% endblock title %}

{% block content %}
<div class="container-md">
    <div class="text-center">
        <h1>{{ character.character_name }} (The Ranger)</h1>
    </div>
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <ul class="list-group">
                {% if char_background.background == 'BEAST-BONDED' %}
                    <a href="{% url 'update-background' character.campaign.id character.id character.background_instance.id %}" class="list-group-item">
                        <h6><strong>Background: {{ char_background.background }}</strong></h6>
                        <p>{{ char_background.description|safe }}</p>
                        {% if character.background_instance.abilities.all|length > 0 %}
                                <ul>
                                {% for ability in character.background_instance.abilities.all %}
                                    <li>{{ ability|safe }}</li>
                                {% endfor %}
                                </ul>
                        {% endif %}
                    </a>
                {% else %}
                    <li class="list-group-item">
                        <h6><strong>Background: {{ char_background.background }}</strong></h6>
                        <p>{{ char_background.description|safe }}</p>
                    </li>
                {% endif %}
                {% include 'campaign/includes/character_detail_basic_info.html' %}
                {% if char_background.background == 'BEAST-BONDED' or animal_companion %}
                    {% if character.animalcompanion_set.all|length == 0 %}
                    <li class="list-group-item">
                        <h6><strong>Animal Companion:</strong></h6>
                        <a href="{% url 'create-animal-companion' character.campaign.id character.id %}" class="btn btn-primary my-3">Add Animal Companion</a>
                    </li>
                    {% else %}
                    <a href="{% url 'update-animal-companion' character.campaign.id character.id animal.id %}" class="list-group-item">
                        <strong>Animal Companion:</strong> {{ animal.name }}
                        <p>
                        {% for attribute in animal.attributes.all %}
                            {% if attribute.tag %}
                                {% if forloop.last %}
                                    <em>{{ attribute }}</em>
                                {% else %}
                                    <em>{{ attribute }}</em>, 
                                {% endif %}      
                            {% endif %}
                        {% endfor %}
                        </p>
                        <div class="d-flex w-100 justify-content-between">    
                            <span><strong>HP:</strong> {{ animal.current_hp }} / {{ animal.max_hp }}</span>
                            <span><strong>Armor:</strong> {{ animal.armor }}</span>
                            <span><strong>Damage:</strong> {{ animal.damage }}</span>
                        </div>
                        <div class="d-flex w-100 justify-content-between">    
                            <span><strong>Cost:</strong> {{ animal.cost }}</span>
                            <span><strong>Loyalty:</strong> {{ animal.loyalty }}</span>
                        </div>
                    </a>
                    {% endif %}
                {% endif %}
            </ul>
        </div>
    </div>
    {% include 'campaign/includes/character_detail_stats.html' %}
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <h4 class='my-3'>Special Possessions</h4>
            <ul class="list-group">
                {% include 'campaign/includes/character_detail_special_possessions.html' %}
            </ul>
        </div>
    </div>
    {% include 'campaign/includes/character_detail_moves.html' %}
    {% include 'campaign/includes/character_detail_inventory.html' %}
    {% include 'campaign/includes/character_detail_arcana.html' %}
    {% include 'campaign/includes/character_detail_followers.html' %}   
</div>

{% endblock content %}